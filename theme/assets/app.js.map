{"version":3,"sources":["app/box-app.js","app/collection.js","app/components/add-button.js","app/components/bar-loader.js","app/components/container-box.bak.js","app/components/container-box.js","app/components/error.js","app/components/fetch.js","app/components/flash.js","app/components/icon-cart.js","app/components/product-box.js","app/components/product-description.js","app/components/quantity-form.js","app/components/select-menu.js","app/components/text-button.js","app/initialize.js","app/lib.js","app/template.js"],"names":["init","productJson","JSON","parse","document","getElementById","textContent","type","renderer","render","querySelector","BoxContent","idMap","variantMap","baseUrl","menuSelectDate","fetchError","loading","fetchJson","fetchDates","includedProducts","handleMouseUp","ev","target","tagName","id","refresh","getAttribute","date","selectedDate","addEventListener","customizeBox","url","Date","window","swup","location","loadPage","submitCart","cart","data","shopify_variant_id","quantity","properties","join","headers","src","error","json","getData","then","Object","keys","length","map","el","shopify_title","replace","toLowerCase","text","item","content","querySelectorAll","forEach","parentNode","BarLoader","hasOwnProp","prototype","hasOwnProperty","ContainerBoxApp","flashMessage","selectedIncludes","possibleAddons","selectedExcludes","selectedAddons","menuAddItem","menuRemoveItem","modalQtyForm","totalPrice","variants","price","loadedFromCart","boxEditHeight","toPrice","num","toFixed","getPrice","includes","shopify_price","updatePriceElement","start","selectedBox","innerHTML","moveItem","from","to","i","shopify_id","push","splice","loadBox","checkLoadPresence","product","found","find","addOnProducts","tmpIncludedIds","tmpAddonIds","filter","selectBox","call","ts","getTime","handleChange","name","parseInt","value","handleEditBoxActive","boxEdit","description","footer","addButton","style","width","clientWidth","boxEditRect","getBoundingClientRect","height","console","log","deltaY","keyFrames","duration","easing","fill","animation","animate","transformOrigin","transform","classList","add","handleClick","editBoxActiveComplete","editBoxActive","fetchData","fetchUrl","fetchCurrentDates","loadCart","items","product_type","box","fetchBox","warn","removedItems","split","trim","checkPresence","variant_id","fetchCart","makeCart","total_price","makeTitle","title","product_id","shopify_product_id","handle","shopify_handle","search","d","slice","toDateString","ErrorMsg","msg","toString","err","Fetch","fetch","response","status","Error","stringify","PostFetch","formdata","opts","method","body","Flash","children","IconCart","ProductBoxApp","cartJson","cartAddons","cartBox","match","variant","ProductDescription","featured_image","QuantityForm","addons","titleStyle","quantityStyle","priceStyle","TitleInput","QuantityInput","PriceInput","SelectMenu","active","menu","startsWith","idx","arr","TextButton","index","array","position","borders","slug","page_type","collection","boxApp","Swup","on","shallowEqual","object1","object2","keys1","keys2","key","Template"],"mappings":"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AGZ;AACA,+BAAiB,eAJL;AAKZ;AACA,+BAAiB,eANL;AAOZ;AACA,+BAAiB,eARL;AASZ;AACA,+BAAiB,eAVL;AAWZ;AACA,+BAAiB;AAZL,aALhB;AAmBE;AACF;AACA;AACA;;AACQC,sBAvBR,GAuBqBX,IAAI,CAACC,KAAL,CAAWC,QAAQ,CAACM,aAAT,CAAuB,cAAvB,EAAuCJ,WAAlD,CAvBrB;AAwBE;AACF;AACA;AACA;AACA;AACA;;AACMU,sBA9BN,GA8BmB,IA9BnB;AA+BE;AACF;AACA;AACA;AACA;AACA;;AACMC,mBArCN,GAqCgB,IArChB;AAsCE;AACF;AACA;AACA;AACA;AACA;;AACMqD,wBA5CN,GA4CqB,+BA5CrB;AA6CE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;;AACMpD,qBArDN,GAqDkB,EArDlB;AAsDE;AACF;AACA;AACA;AACA;AACA;;AACMC,sBA5DN,GA4DmB,EA5DnB;AA6DE;AACF;AACA;AACA;AACA;AACA;;AACQL,mBAnER,GAmEkB,yCAnElB;AAoEE;AACF;AACA;AACA;AACA;AACA;;AASE;AACF;AACA;AACA;AACA;AACA;AACA;AACMyD,4BAzFN,GAyFyB,EAzFzB;AA0FE;AACF;AACA;AACA;AACA;AACA;;AACMC,0BAhGN,GAgGuB,EAhGvB;AAiGE;AACF;AACA;AACA;AACA;AACA;;AACMC,4BAvGN,GAuGyB,EAvGzB;AAwGE;AACF;AACA;AACA;AACA;AACA;;AACMC,0BA9GN,GA8GuB,EA9GvB;AA+GE;AACF;AACA;AACA;AACA;AACA;;AASE;AACF;AACA;AACA;AACA;AACA;AACM3D,0BAnIN,GAmIsB,KAnItB;AAoIE;AACF;AACA;AACA;AACA;AACA;;AACM4D,uBA1IN,GA0IoB,KA1IpB;AA2IE;AACF;AACA;AACA;AACA;AACA;;AACMC,0BAjJN,GAiJuB,KAjJvB;AAkJE;AACF;AACA;AACA;AACA;AACA;;AACMC,wBAxJN,GAwJqB,KAxJrB;AAyJE;AACF;AACA;AACA;AACA;AACA;;AAEE;AACF;AACA;AACA;AACA;AACA;AA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","file":"theme/assets/app.js","sourcesContent":["/** @jsx createElement */\n/**\n * Router and starting  point of the box app.\n * Renders [crank]{@link https://www.npmjs.com/@bikeshaving/crank} elements\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/initialize\n * @requires @bikeshaving/crank\n * @listens DOMContentLoaded\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\nimport { renderer } from \"@bikeshaving/crank/cjs/dom\";\nimport ContainerBoxApp from \"./components/container-box\";\nimport ProductBoxApp from \"./components/product-box\";\n\nconst init = async () => {\n  const productJson = JSON.parse(document.getElementById(\"product-json\").textContent);\n  if (productJson.type === \"Container Box\") {\n    await renderer.render(<ContainerBoxApp productJson={productJson} />, document.querySelector(\"#app\"));\n  } else if (productJson.type === \"Box Produce\") {\n    await renderer.render(<ProductBoxApp productJson={productJson} />, document.querySelector(\"#app\"));\n  } else {\n    return;\n  }\n};\n\n// imported by initialize\nexport default { init };\n","/** @jsx createElement */\n/**\n * Home page client app for collection listings\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/home-page\n * @requires @bikeshaving/crank\n * @listens DOMContentLoaded\n */\nimport \"regenerator-runtime/runtime\"; // regeneratorRuntime error\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\nimport { renderer } from \"@bikeshaving/crank/cjs/dom\";\n\nimport { Fetch, PostFetch } from \"./components/fetch\";\nimport Error from \"./components/error\";\nimport BarLoader from \"./components/bar-loader\";\nimport SelectMenu from \"./components/select-menu\";\n\nfunction* BoxContent ({productJson}) {\n  /** \n   * Only required on developement site where id's don't match boxes - can be\n   * updated once we can duplicated box mongo db\n   */\n  const idMap = {\n    // small\n    \"6163982876822\": \"5571286728870\",\n    // med\n    \"6163982975126\": \"5571286794406\",\n    // med fruit\n    \"6163982844054\": \"5576573878438\",\n    // med bread\n    \"6163982942358\": \"5577031352486\",\n    // big\n    \"6163982680214\": \"5571286696102\",\n    // custom\n    \"6163982647446\": \"5598426005670\",\n  }\n  /** \n   * Only required on developement site where id's don't match boxes - can be\n   * updated once we can duplicated box mongo db\n   */\n  const variantMap = JSON.parse(document.querySelector(\"#variant-map\").textContent);\n  /**\n   * Base url to api\n   *\n   * @member baseUrl\n   * @type {string}\n   */\n  const baseUrl = \"https://streamsidedev.cousinsd.net/api/\";\n  /**\n   * The selected date after user select, one of fetchJson.keys\n   *\n   * @member selectedDate\n   * @type {string}\n   */\n  let selectedDate;\n  /**\n   * Display date selection menu if active\n   *\n   * @member menuSelectDate\n   * @type {boolean}\n   */\n  let menuSelectDate= false;\n  /**\n   * If fetching data was unsuccessful.\n   *\n   * @member fetchError\n   * @type {object|string|null}\n   */\n  let fetchError = null;\n  /**\n   * Display loading indicator while fetching data\n   *\n   * @member loading\n   * @type {boolean}\n   */\n  let loading = true;\n  /**\n   * Contains box data as collected from [api/current-boxes-by-product]{@link\n   * module:api/current-boxes-by-product}. The data uses delivery date as keys to unsorted\n   * array of box data.\n   *\n   * @member fetchJson\n   * @type {object}\n   */\n  let fetchJson = {};\n  /**\n   * Upcoming delivery dates\n   *\n   * @member fetchDates\n   * @type {object}\n   */\n  let fetchDates = [];\n  /**\n   * Included products - disregarding delivery date for now\n   *\n   * @member includedProducts\n   * @type {object}\n   */\n  let includedProducts = [];\n  /**\n   * Handle mouse up on selected components\n   *\n   * @function handleMouseUp\n   * @param {object} ev The firing event\n   * @listens click\n   */\n  const handleMouseUp = (ev) => {\n    if (ev.target.tagName === \"BUTTON\") {\n\n      switch(ev.target.id) {\n        case `selectDate${productJson.id}`:\n          menuSelectDate = !menuSelectDate;\n          this.refresh()\n          break;\n      }\n\n    } else if (ev.target.tagName === \"DIV\") {\n\n      switch(ev.target.getAttribute(\"name\")) {\n        case `selectDate${productJson.id}`:\n          const date = ev.target.getAttribute(\"data-item\");\n          selectedDate = date;\n          //selectBox(date);\n          menuSelectDate = false;\n          this.refresh()\n          break;\n      }\n    }\n  };\n\n  this.addEventListener(\"mouseup\", handleMouseUp);\n\n  /**\n   * Customize box clicked - reload page to box product\n   *\n   * @function customizeBox\n   */\n  const customizeBox = () => {\n    const url = `${productJson.url}?${Date.parse(selectedDate)}`;\n    if (typeof window.swup === 'undefined') {\n      window.location = url;\n    } else {\n      window.swup.loadPage({ url });\n    }\n  };\n\n  /**\n   * Submit cart data as made up from makeCart - also the callee\n   *\n   * @function submitCart\n   */\n  const submitCart = async ({ cart }) => {\n\n    const data = {\n      id: variantMap[fetchJson[selectedDate].shopify_variant_id],\n      quantity: 1,\n      properties: {\n        \"Delivery Date\": selectedDate,\n        \"Including\": includedProducts.join(','),\n      }\n    };\n    const headers = {\"Content-Type\": \"application/json\"};\n    const src = \"/cart/add.js\";\n    const {error, json} = await PostFetch({src, data, headers});\n\n    const url = \"/cart\";\n    if (typeof window.swup === 'undefined') {\n      window.location = url;\n    } else {\n      window.swup.loadPage({ url });\n    }\n  };\n\n  /**\n   * Gather box includes for display, watch for dates\n   *\n   * @function selectBox\n   * @param date {string} The selected date\n   */\n  const getData = async () => {\n    await Fetch(`${baseUrl}current-boxes-by-product/${idMap[productJson.id]}`)\n      .then(({error, json}) => {\n        if (error) {\n          fetchError = error;\n        } else {\n          if (Object.keys(json).length > 0) {\n            fetchDates = Object.keys(json);\n            includedProducts = json[fetchDates[0]].includedProducts.map(el => el.shopify_title.replace(/^- ?/, \"\"));\n            fetchJson = json;\n          }\n        }\n        loading = false;\n        this.refresh();\n      })\n  };\n\n  // get loaded\n  getData();\n\n  while(true) {\n    yield (\n      <Fragment>\n        { fetchError && <Error msg={fetchError} /> }\n        { loading ? <BarLoader /> : (\n          <Fragment>\n            <div class=\"w-100 pv2\">\n              { !includedProducts.length ? (\n                fetchDates.length ? (\n                  <div>Build your own box with available products.</div>\n                ) : (\n                  <div>No boxes scheduled for delivery, we will post next week's boxes shortly. Please try again later.</div>\n                )\n              ) : (\n                includedProducts.map(el => (\n                  <a\n                    href={`/products/${el.replace(/ /g, '-').toLowerCase()}`}\n                    class=\"link pointer o-90 fl f6 ph3 ma1 ba br-pill b--streamside-blue bg-transparent fg-streamside-blue\"\n                  >\n                      { el }\n                  </a>\n              )))}\n            </div>\n            <div class=\"cf\" />\n            { fetchDates.length ? (\n              <Fragment>\n                <div class=\"relative w-100 pt3-ns cf\">\n                  <div class={selectedDate ? \"w-100 w-third-ns fl\" : \"w-100 fl\"}>\n                    <SelectMenu\n                      id={`selectDate${productJson.id}`}\n                      menu={fetchDates.map(el => ({text: el, item: el}))}\n                      title=\"Select Date\"\n                      active={menuSelectDate}\n                    >\n                      { selectedDate ? selectedDate : \"Select delivery date\" }&nbsp;&nbsp;&nbsp;&#9662;\n                    </SelectMenu>\n                  </div>\n                  { selectedDate && (\n                    <Fragment>\n                      <div class=\"w-100 w-third-ns fl pl1\">\n                        <button\n                          type=\"button\"\n                          name=\"add\"\n                          aria-label=\"Add to cart\"\n                          class=\"di f6 ttu w-100 tracked dim outline-0 debut-yellow b--debut-brown ba ba1 bg-debut-brown br2 pa2 mb1 pointer\"\n                          onclick={submitCart}\n                        >\n                            Add to cart\n                        </button>\n                      </div>\n                      <div class=\"w-100 w-third-ns fl pl1\">\n                        <button\n                          type=\"button\"\n                          name=\"customize\"\n                          aria-label=\"Customize box\"\n                          class=\"di f6 ttu w-100 tracked dim outline-0 debut-yellow b--debut-brown ba ba1 bg-debut-brown br2 pa2 mb1 pointer\"\n                          onclick={customizeBox}\n                        >\n                          Customize box\n                        </button>\n                      </div>\n                    </Fragment>\n                  )}\n                </div>\n              </Fragment>\n            ) : (\n              <div>&nbsp;</div>\n            )}\n\n          </Fragment>\n        )}\n      </Fragment>\n    );\n  };\n}\n\nconst init = () => {\n  const content = document.querySelectorAll(\"p[name='box-content']\");\n  content.forEach(async el => {\n    const json = JSON.parse(el.parentNode.querySelector(\"script\").textContent);\n    await renderer.render(<BoxContent productJson={json} />, el);\n  });\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  // do your setup here\n  // init();\n});\n\n// imported by initialize\nexport default { init };\n","/** @jsx createElement */\n/**\n * Add to cart button\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/addToCartButton\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\n\nexport default function () {\n  return (\n    <button\n      type=\"submit\"\n      name=\"add\"\n      aria-label=\"Add to cart\"\n      class=\"product-form__cart-submit debut-yellow bg-debut-yellow br2\"\n      data-add-to-cart=\"\"\n    >\n      <span data-add-to-cart-text=\"\">Add to cart</span>{\" \"}\n      <span class=\"dn\" data-loader=\"\">\n        <svg\n          aria-hidden=\"true\"\n          focusable=\"false\"\n          role=\"presentation\"\n          class=\"icon icon-spinner\"\n          viewbox=\"0 0 20 20\"\n        >\n          <path\n            d=\"M7.229 1.173a9.25 9.25 0 1 0 11.655 11.412 1.25 1.25 0 1 0-2.4-.698 6.75 6.75 0 1 1-8.506-8.329 1.25 1.25 0 1 0-.75-2.385z\"\n            fill=\"#919EAB\"\n          ></path>\n        </svg>\n      </span>\n    </button>\n  );\n}\n","/** @jsx createElement */\n/**\n * Loading indicator module\n *\n * @module app/lib/bar-loader\n * @exports {Element} BarLoader\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Loader component\n *\n * @returns {Element} DOM component\n * @example\n * { loading && <BarLoader /> }\n */\nconst BarLoader = () => (\n  <div class=\"progress-bar mt2\">\n    <span class=\"bar\">\n      <span class=\"progress\" />\n    </span>\n  </div>\n);\n\nexport default BarLoader;\n\n","/** @jsx createElement */\n/**\n * Router and starting  point of the box app.\n * Renders [crank]{@link https://www.npmjs.com/@bikeshaving/crank} elements\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/initialize\n * @requires @bikeshaving/crank\n * @listens DOMContentLoaded\n */\nimport \"regenerator-runtime/runtime\"; // regeneratorRuntime error\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\nimport { renderer } from \"@bikeshaving/crank/cjs/dom\";\n\nimport Error from \"./error\";\nimport BarLoader from \"./bar-loader\";\nimport QuantityForm from \"./quantity-form\";\nimport SelectMenu from \"./select-menu\";\nimport Flash from \"./flash\";\nimport { Fetch, PostFetch } from \"./fetch\";\nimport { shallowEqual } from \"../lib\";\n\nconst hasOwnProp = Object.prototype.hasOwnProperty;\n/**\n * BoxApp crank component\n *\n * @function BoxApp\n * @param {object} props The property object\n * @param {object} props.productJson Shopify product data as extracted from\n * product page json script tag\n * @returns {Element} A crank DOM component\n */\nasync function* ContainerBoxApp({productJson}) {\n  /** \n   * Only required on developement site where id's don't match boxes - can be\n   * updated once we can duplicated box mongo db\n   */\n  const idMap = {\n    // small\n    \"6163982876822\": \"5571286728870\",\n    // med\n    \"6163982975126\": \"5571286794406\",\n    // med fruit\n    \"6163982844054\": \"5576573878438\",\n    // med bread\n    \"6163982942358\": \"5577031352486\",\n    // big\n    \"6163982680214\": \"5571286696102\",\n    // custom\n    \"6163982647446\": \"5598426005670\",\n  }\n  /** \n   * Only required on developement site where id's don't match boxes - can be\n   * updated once we can duplicated box mongo db\n   */\n  const variantMap = JSON.parse(document.querySelector(\"#variant-map\").textContent);\n  /**\n   * If fetching data was unsuccessful.\n   *\n   * @member fetchError\n   * @type {object|string|null}\n   */\n  let fetchError = null;\n  /**\n   * Display loading indicator while fetching data\n   *\n   * @member loading\n   * @type {boolean}\n   */\n  let loading = true;\n  /**\n   * A message to the user - on 4s fade out\n   *\n   * @member flashMessage\n   * @type {string}\n   */\n  let flashMessage = \"Please select a delivery date\";\n  /**\n   * Contains box data as collected from [api/current-boxes-by-product]{@link\n   * module:api/current-boxes-by-product}. The data uses delivery date as keys to unsorted\n   * array of box data.\n   *\n   * @member fetchJson\n   * @type {object}\n   */\n  let fetchJson = {};\n  /**\n   * Contains array of current box dates duplicating fetchJson.keys\n   *\n   * @member fetchDates\n   * @type {Array}\n   */\n  let fetchDates = [];\n  /**\n   * Base url to api\n   *\n   * @member baseUrl\n   * @type {string}\n   */\n  const baseUrl = \"https://streamsidedev.cousinsd.net/api/\";\n  /**\n   * The selected date after user select, one of fetchJson.keys\n   *\n   * @member selectedDate\n   * @type {string}\n   */\n  let selectedDate;\n  /**\n   * The selected box after user select: fetchJson[selectedDate]\n   *\n   * @member selectedBox\n   * @type {object}\n   */\n  let selectedBox;\n  /**\n   * Items included in the box, initially matches selectedBox.includedProducts unless pulling from cart data\n   * but can be edited by the user\n   *\n   * @member selectedIncludes\n   * @type {Array}\n   */\n  let selectedIncludes = [];\n  /**\n   * Items that can be included in the box, initially matches selectedBox.addOnProducts unless pulling from cart data\n   *\n   * @member possibleAddons\n   * @type {Array}\n   */\n  let possibleAddons = [];\n  /**\n   * Items excluded from the box by the user - can only be items initially in selectedBox.includedProducts\n   *\n   * @member selectedExcludes\n   * @type {Array}\n   */\n  let selectedExcludes = [];\n  /**\n   * Items added to the box by the user, can only be items found in selectedBox.addOnProducts\n   *\n   * @member selectedAddons\n   * @type {Array}\n   */\n  let selectedAddons = [];\n  /**\n   * Show box customize options\n   *\n   * @member editBoxActive\n   * @type {boolean}\n   */\n  let editBoxActive;\n  /**\n   * Show box customize options\n   *\n   * @member editBoxActive\n   * @type {boolean}\n   */\n  let editBoxActiveComplete;\n  /**\n   * Display date selection menu if active\n   *\n   * @member menuSelectDate\n   * @type {boolean}\n   */\n  let menuSelectDate= false;\n  /**\n   * Display add product menu if active\n   *\n   * @member menuAddItem\n   * @type {boolean}\n   */\n  let menuAddItem = false;\n  /**\n   * Display remove product menu if active\n   *\n   * @member menuRemoveItem\n   * @type {boolean}\n   */\n  let menuRemoveItem = false;\n  /**\n   * Display edit quantities form modal\n   *\n   * @member modalQtyForm\n   * @type {boolean}\n   */\n  let modalQtyForm = false;\n  /**\n   * The price element - updated on change, and set after fetch\n   *\n   * @member priceElement\n   * @type {Element}\n   */\n  let priceElement;\n  /**\n   * The total price TODO here in development udating on refresh - production\n   * may actuall use priceElement as above\n   *\n   * @member priceElement\n   * @type {Element}\n   */\n  let totalPrice = productJson.variants[0].price;\n  /**\n   * Have we loaded data from an existing cart?\n   *\n   * @member loadedFromCart\n   * @type {boolean} false\n   */\n  let loadedFromCart = false;\n  /**\n   * Store height of the edit form to animate its display\n   *\n   * @member boxEditHeight\n   * @type {number} 0\n   */\n  let boxEditHeight = 0;\n  /**\n   * Make up a string price\n   *\n   * @param {number} num The integer number to use\n   * @returns {string} Price string\n   */\n  const toPrice = (num) => `$${(num * 0.01).toFixed(2)}`;\n  /**\n   * Figure the price for the element, if it's a standard included product only\n   * extra quantities greater than one incur a price\n   *\n   * @param {object} el The target element\n   * @param {boolean} includes Is this a standard included product?\n   * @returns {string} Price string\n   */\n  const getPrice = (el, includes) => toPrice(el.shopify_price * (includes ? el.quantity - 1 : el.quantity));\n\n  /**\n   * Update priceElement on relevant changes\n   *\n   * @function updatePriceElement\n   */\n  const updatePriceElement = () => {\n    let start = selectedBox.shopify_price;\n    selectedIncludes.forEach(el => {\n      if (el.quantity > 1) start += el.shopify_price * (el.quantity - 1);\n    });\n    selectedAddons.forEach(el => {\n      start += el.shopify_price * el.quantity;\n    });\n    totalPrice = start;\n    // ensure that this.refresh is called\n    document.querySelector(\"#product-price\").innerHTML = `$${(totalPrice * 0.01).toFixed(2)}`;\n  };\n\n  /**\n   * Move product between product lists of addon, excludes etc\n   *\n   * @function moveItem\n   * @param id {number} The shopify_id of the product\n   * @param from {array} The list to remove item from\n   * @param to {array} The list to add the item to\n   */\n  const moveItem = (id, from, to) => {\n    let i;\n    for (i = 0; i < from.length; i++) {\n      if (from[i].shopify_id === id) {\n        to.push(from[i]);\n        from.splice(i, 1);\n      }\n    }\n    updatePriceElement();\n  };\n\n  /**\n   * Load the product items\n   *\n   * @function loadBox\n   * @param date {string} The selected date\n   */\n  const loadBox = () => {\n    // may have upped the quantity of standard included product\n    const checkLoadPresence = (product) => {\n      const found = selectedIncludes.find(el => el.shopify_variant_id === product.shopify_variant_id);\n      if (typeof found === \"undefined\") return false;\n      return found;\n    }\n\n    selectedIncludes = selectedBox.includedProducts.map(el => {\n      const item = {...el};\n      item.shopify_title = el.shopify_title.replace(/^- ?/, '');\n      const found = checkLoadPresence(el);\n      item.quantity = found ? found.quantity : 1;\n      return item;\n    });\n    possibleAddons = selectedBox.addOnProducts.map(el => {\n      const item = {...el};\n      item.shopify_title = el.shopify_title.replace(/^- ?/, '');\n      item.quantity = 1;\n      return item;\n    });\n\n    // TODO find another smarter, cleaner way to do this. The purpose of this\n    // algorithm is to match addons and excludes when switching between dates\n    // and so is not done initially when loading cart data.\n\n    // tmp arrays for filter tests\n    let tmpIncludedIds = selectedIncludes.map(el => el.shopify_id);\n    let tmpAddonIds = possibleAddons.map(el => el.shopify_id);\n\n    selectedExcludes = selectedExcludes.filter(el => tmpIncludedIds.includes(el.shopify_id));\n    selectedAddons = selectedAddons.filter(el => tmpAddonIds.includes(el.shopify_id));\n\n    // re-build tmp arrays\n    tmpIncludedIds = selectedExcludes.map(el => el.shopify_id);\n    tmpAddonIds = selectedAddons.map(el => el.shopify_id);\n\n    selectedIncludes = selectedIncludes.filter(el => !tmpIncludedIds.includes(el.shopify_id));\n    possibleAddons = possibleAddons.filter(el => !tmpAddonIds.includes(el.shopify_id));\n\n    totalPrice = selectedBox.shopify_price;\n  };\n\n  /**\n   * Set the selected box and set up product arrays, called after selecting\n   * date.\n   *\n   * @function selectBox\n   * @param date {string} The selected date\n   */\n  const selectBox = async (date) => {\n    selectedDate = date;\n    if (!hasOwnProp.call(fetchJson, selectedDate)) {\n      loading = false;\n      this.refresh();\n      const ts = new Date(date).getTime();\n      await Fetch(`${baseUrl}box-by-date-and-product/${idMap[productJson.id]}/${ts}`)\n        .then(({error, json}) => {\n          if (error) {\n            fetchError = error;\n          } else {\n            fetchJson[selectedDate] = json;\n            selectedBox = fetchJson[selectedDate];\n            loadBox();\n          }\n          loading = false;\n          this.refresh();\n        })\n    } else {\n      selectedBox = fetchJson[selectedDate];\n      loadBox();\n      this.refresh();\n    }\n  };\n\n  /**\n   * Handle change on selected input elements\n   *\n   * @function handleChange\n   * @param {object} ev The firing event\n   * @listens change\n   */\n  const handleChange = (ev) => {\n    if (ev.target.tagName === \"INPUT\") {\n      if (ev.target.name === \"quantity\") {\n        switch(ev.target.getAttribute(\"data-id\")) {\n          case \"includes\":\n            selectedIncludes.forEach(el => {\n              if (el.shopify_id === ev.target.id) {\n                if (parseInt(ev.target.value) === 0) {\n                  el.quantity = 1;\n                  flashMessage = `${el.shopify_title} removed.`;\n                  moveItem(el.shopify_id, selectedIncludes, selectedExcludes);\n                } else {\n                  el.quantity = ev.target.value;\n                  flashMessage = `${el.shopify_title} quantity changed to ${el.quantity}.`;\n                }\n              }\n            });\n            break;\n          case \"addons\":\n            selectedAddons.forEach(el => {\n              if (el.shopify_id === ev.target.id) {\n                if (parseInt(ev.target.value) === 0) {\n                  el.quantity = 1;\n                  flashMessage = `Add on ${el.shopify_title} removed.`;\n                  moveItem(el.shopify_id, selectedAddons, possibleAddons);\n                } else {\n                  el.quantity = ev.target.value;\n                  flashMessage = `${el.shopify_title} quantity changed to ${el.quantity}.`;\n                }\n              }\n            });\n            break;\n        }\n        updatePriceElement();\n        this.refresh();\n      }\n    }\n  };\n\n  this.addEventListener(\"change\", handleChange);\n\n  /**\n   * Set up edit box either when page loaded from collection and choosing to\n   * edit box or after selecting checkbox\n   *\n   * @function handleEditBoxActive\n   */\n  const handleEditBoxActive = async (ev) => {\n    const boxEdit = document.getElementById(\"container-box-edit\");\n    const description = document.querySelector(\"#product-description\");\n    const footer = document.querySelector(\"#footer\");\n    const addButton = document.querySelector(\"#add-button\");\n    if (boxEdit) {\n      boxEdit.style.width = `${description.clientWidth}px`;\n      const boxEditRect = boxEdit.getBoundingClientRect();\n      boxEditHeight = boxEditRect.height;\n    };\n    console.log('no box here', boxEdit);\n\n    // animate out of the way\n    const deltaY = boxEditHeight;\n    let animation;\n\n    let keyFrames = {\n      duration: 600,\n      easing: \"ease-in-out\",\n      fill: \"both\"\n    };\n\n    if (boxEdit) {\n      [description, footer, addButton].forEach(el => {\n        animation = el.animate([{\n          transformOrigin: \"top left\",\n          transform: `translate(0px, ${deltaY}px)`\n        }], keyFrames);\n        animation.addEventListener(\"finish\", () => {\n          boxEdit.classList.add(\"transition-fade\");\n        });\n      });\n    } else {\n      [description, footer, addButton].forEach(el => {\n        animation = el.animate([{\n          transformOrigin: \"top left\",\n          transform: \"none\"\n        }], keyFrames);\n      });\n    };\n  };\n\n  /**\n   * Handle click event on selected elements\n   *\n   * @function handleClick\n   * @param {object} ev The firing event\n   * @listens click\n   */\n  const handleClick = async (ev) => {\n    if (ev.target.tagName === \"INPUT\") {\n      if (ev.target.type === \"checkbox\" && ev.target.id === \"toggleEditBox\") {\n\n        if (!editBoxActiveComplete === null) editBoxActiveComplete = null;\n        editBoxActive = !editBoxActive;\n        await this.refresh();\n\n        handleEditBoxActive();\n      }\n    }\n  };\n\n  this.addEventListener(\"click\", handleClick);\n\n  /**\n   * Handle mouse up on selected components\n   *\n   * @function handleMouseUp\n   * @param {object} ev The firing event\n   * @listens click\n   */\n  const handleMouseUp = (ev) => {\n    if (ev.target.tagName === \"BUTTON\") {\n\n      switch(ev.target.id) {\n        case \"selectDate\":\n          menuSelectDate = !menuSelectDate;\n          modalQtyForm = menuRemoveItem = menuAddItem = false;\n          this.refresh()\n          break;\n        case \"removeItem\":\n          menuRemoveItem = !menuRemoveItem;\n          modalQtyForm = menuSelectDate = menuAddItem = false;\n          this.refresh()\n          break;\n        case \"addItem\":\n          menuAddItem= !menuAddItem;\n          modalQtyForm = menuRemoveItem = menuSelectDate = false;\n          this.refresh()\n          break;\n        case \"qtyForm\":\n          modalQtyForm= !modalQtyForm;\n          menuSelectDate = menuRemoveItem = menuSelectDate = false;\n          this.refresh()\n          break;\n        case \"qtyFormClose\":\n          modalQtyForm= false;\n          this.refresh()\n          break;\n      }\n\n    } else if (ev.target.tagName === \"DIV\") {\n\n      switch(ev.target.getAttribute(\"name\")) {\n        case \"selectDate\":\n          const date = ev.target.getAttribute(\"data-item\");\n          if (typeof selectedDate === 'undefined') {\n            flashMessage = `Delivery date chosen ${date}`;\n          } else {\n            flashMessage = `Delivery date changed to ${date}`;\n          }\n          selectBox(date);\n          menuSelectDate = false;\n          this.refresh()\n          break;\n        case \"removeItem\":\n          flashMessage = `${ev.target.getAttribute(\"data-title\")} removed.`;\n          moveItem(ev.target.getAttribute(\"data-item\"), selectedIncludes, selectedExcludes);\n          menuRemoveItem = false;\n          this.refresh()\n          break;\n        case \"addItem\":\n          flashMessage = `${ev.target.getAttribute(\"data-title\")} added.`;\n          moveItem(ev.target.getAttribute(\"data-item\"), possibleAddons, selectedAddons);\n          menuAddItem = false;\n          this.refresh()\n          break;\n        case \"selectedAddon\":\n          flashMessage = `Add on ${ev.target.getAttribute(\"data-title\")} removed.`;\n          moveItem(ev.target.getAttribute(\"data-item\"), selectedAddons, possibleAddons);\n          this.refresh()\n          break;\n        case \"selectedExclude\":\n          flashMessage = `${ev.target.getAttribute(\"data-title\")} added back.`;\n          moveItem(ev.target.getAttribute(\"data-item\"), selectedExcludes, selectedIncludes);\n          this.refresh()\n          break;\n      }\n    }\n  };\n\n  this.addEventListener(\"mouseup\", handleMouseUp);\n\n  /**\n   * Uses fetch to collect current boxes from api and then refreshs `this`\n   * (Called as soon as the element is mounted.)\n   *\n   * @function fetchData\n   */\n  const fetchData = async () => {\n    const fetchUrl = `${baseUrl}current-boxes-by-product/${idMap[productJson.id]}`;\n    const {error, json} = await Fetch(fetchUrl);\n    if (error) {\n      fetchError = error;\n    } else {\n      fetchJson = json;\n      fetchDates = Object.keys(fetchJson);\n      // if only one bypass the date select\n      if (fetchDates.length === 1) {\n        selectBox(fetchDates[0]); // be wary - do we need to refresh component?\n        flashMessage = \"\";\n      }\n    }\n    loading = false;\n    this.refresh();\n  };\n\n  /**\n   * Uses fetch to collect current dates from api\n   *\n   * @function fetchCurrentDates\n   */\n  const fetchCurrentDates = async () => {\n    const fetchUrl = `${baseUrl}current-box-dates`;\n    const {error, json} = await Fetch(fetchUrl);\n    if (error) {\n      fetchError = error;\n    } else {\n      fetchDates = json;\n      if (fetchDates.length === 1) {\n        //selectBox(fetchDates[0]); // this causes a flicket because drop down already rendered\n        flashMessage = \"\";\n      }\n    }\n    loading = false;\n    //this.refresh();\n  };\n\n  /**\n   * Load current cart if cart.items.length - called from `fetchCart` which is caalled immdiately the component loads\n   */\n  const loadCart = async (cart) => {\n    // product_type from liquid object would be (?) cart.items[x].product.type\n    const [box] = cart.items.filter(el => el.product_type === \"Container Box\");\n    selectedDate = box.properties[\"Delivery Date\"];\n\n    // loading dates can happen asynchronously to loading selected box\n    await Fetch(`${baseUrl}current-box-dates`)\n      .then(({error, json}) => {\n        if (error) {\n          fetchError = error;\n        } else {\n          fetchDates = json;\n        }\n        this.refresh();\n      })\n\n    fetchBox({ box, cart });\n  };\n\n  /**\n   * Uses fetch to collect current cart for the session \n   *\n   * @function fetchBox\n   */\n  const fetchBox = async ({ box, cart }) => {\n    // get the box data\n    if (!selectedDate) {\n      console.warn(\"Calling loadBox with no selectedDate\");\n      return;\n    };\n    const ts = new Date(selectedDate).getTime();\n    await Fetch(`${baseUrl}box-by-date-and-product/${idMap[productJson.id]}/${ts}`)\n      .then(({error, json}) => {\n        if (error) {\n          fetchError = error;\n        } else {\n          fetchJson[selectedDate] = json;\n          selectedBox = fetchJson[selectedDate];\n\n          const removedItems = box ? box.properties[\"Removed Items\"].split(',').map(el => el.trim()) : [];\n\n          // get the excluded items\n          selectedExcludes = selectedBox.includedProducts\n            .filter(el => removedItems.includes(el.shopify_title));\n\n          const checkPresence = (product) => {\n            if (!cart) return false;\n            const found = cart.items.find(el => el.variant_id === product.shopify_variant_id);\n            if (typeof found === \"undefined\") return false;\n            return found;\n          }\n\n          // get the included box items filtering out those already excluded if loaded from cart\n          selectedIncludes = selectedBox.includedProducts\n            .filter(el => !removedItems.includes(el.shopify_title))\n            .map(el => {\n              const item = {...el};\n              item.shopify_title = el.shopify_title.replace(/^- ?/, '');\n              const found = checkPresence(el);\n              item.quantity = found ? found.quantity + 1 : 1;\n              return item;\n            });\n          // get the addon products and their quantity if loaded from cart\n          selectedAddons = selectedBox.addOnProducts\n            .filter(el => checkPresence(el))\n            .map(el => {\n              const item = {...el};\n              item.shopify_title = el.shopify_title.replace(/^- ?/, '');\n              const found = checkPresence(el);\n              item.quantity = found.quantity;\n              return item;\n            });\n          // get defined possible addons filtering out those that have been added o the cart\n          possibleAddons = selectedBox.addOnProducts\n            .filter(el => !checkPresence(el))\n            .map(el => {\n              const item = {...el};\n              item.shopify_title = el.shopify_title.replace(/^- ?/, '');\n              item.quantity = 1;\n              return item;\n            });\n          }\n        loading = false;\n        updatePriceElement();\n        flashMessage = \"Loaded box from your cart\";\n        loadedFromCart = true;\n        this.refresh();\n      })\n  };\n\n  /**\n   * Uses fetch to collect current cart for the session \n   *\n   * @function fetchCart\n   */\n  const fetchCart = async () => {\n      /*\n    const json = JSON.parse(document.querySelector(\"#cart-json\").textContent);\n    if (json.items.length === 0) {\n      fetchCurrentDates();\n    } else {\n      loadCart(json);\n    }\n    */\n    const {error, json} = await Fetch(\"/cart.js\");\n    if (error) {\n      fetchError = error;\n      this.refresh();\n    } else {\n      if (!json.items) throw \"Failed to load cart data\";\n      if (json.items.length === 0) {\n        fetchCurrentDates();\n      } else {\n        loadCart(json);\n      }\n    }\n  };\n\n  /**\n   * Submit cart data as made up from makeCart - also the callee\n   *\n   */\n  const submitCart = async ({ cart }) => {\n\n    const data = {\n      items: cart.items.map(item => {\n        return {\n          id: variantMap[item.variant_id],\n          quantity: item.quantity,\n          properties: item.properties\n        }\n      })\n    };\n    const headers = {\"Content-Type\": \"application/json\"};\n    const src = \"/cart/add.js\";\n    const {error, json} = await PostFetch({src, data, headers});\n    const url = \"/cart\";\n    if (typeof window.swup === 'undefined') {\n      window.location = url;\n    } else {\n      window.swup.loadPage({ url });\n    }\n  };\n\n  /**\n   * Make up cart data for submission. Doing this is a simple as submitting to\n   * cart/add.js with an array of items\n   *\n   * TODO: Not in necessary - could call submitCart directly - see collection.js for example\n   *\n   */\n  const makeCart = () => {\n    const cart = {};\n    cart.total_price = totalPrice;\n\n    const makeTitle = (el) => {\n      let title = el.shopify_title;\n      if (el.quantity > 1) {\n        title = `${title} (${el.quantity})`;\n      }\n      return title\n    };\n\n    cart.items = [];\n    // first item is the box itself\n    cart.items.push({\n      quantity: 1,\n      title: selectedBox.shopify_title,\n      product_id: selectedBox.shopify_product_id,\n      variant_id: selectedBox.shopify_variant_id,\n      handle: selectedBox.shopify_handle,\n      product_type: \"Container Box\",\n      properties: {\n        \"Delivery Date\": selectedDate,\n        \"Including\": selectedIncludes.map(el => makeTitle(el)).join(),\n        \"Removed Items\": selectedExcludes.map(el => el.shopify_title).join(),\n        //\"Add on Items\": selectedAddons.map(el => makeTitle(el)).join()\n      }\n    })\n    // following that are any addon items\n    selectedAddons.forEach(el => {\n      cart.items.push({\n        quantity: el.quantity,\n        title: el.shopify_title,\n        product_id: el.shopify_product_id,\n        variant_id: el.shopify_variant_id,\n        handle: el.shopify_handle,\n        product_type: \"Box Produce\",\n        properties: {\n          \"Delivery Date\": selectedDate,\n          \"Add on product to\": selectedBox.shopify_title\n        }\n      })\n    })\n    // following that are any addon items that are already included in box but are extras\n    selectedIncludes.forEach(el => {\n      if (el.quantity > 1) {\n        cart.items.push({\n          quantity: el.quantity - 1,\n          title: el.shopify_title,\n          product_id: el.shopify_product_id,\n          variant_id: el.shopify_variant_id,\n          handle: el.shopify_handle,\n          product_type: \"Box Produce\",\n          properties: {\n            \"Delivery Date\": selectedDate,\n            \"Add on product to\": selectedBox.shopify_title\n          }\n        })\n      }\n    })\n\n    // this is of the same structure as a fetched cart\n    submitCart({ cart });\n  }\n\n  fetchCart(); // the first thing to happem\n\n  if (window.location.search) {\n    // we have a selected date coming for the collection - TODO check for cart or handle from the collection\n    const d = new Date(parseInt(window.location.search.slice(1)));\n    selectedDate = d.toDateString();\n    editBoxActive = true;\n    editBoxActiveComplete = true;\n    fetchBox({ box: null, cart: null });\n    // fails because element not yet rendered\n    //handleEditBoxActive(); // run the algorithm to display edit options\n  }\n\n  for await ({productJson} of this) {\n    yield (\n      <div class=\"mt2 sans-serif\" id=\"container-box\">\n        { fetchError && <Error msg={fetchError} /> }\n        { !loading ? (\n          <Fragment>\n            { flashMessage && (\n              <Flash>{ flashMessage }</Flash>\n            )}\n            { (fetchDates.length > 0) ? (\n              <Fragment>\n                { !selectedDate && (\n                  <div class=\"warn fg-warn br2 w-100 ba pa1 mb2 tc\">\n                    <span class=\"f3 b pr1\">&#33;</span>\n                    Please choose a date for delivery\n                  </div>\n                )}\n\n                <div class=\"relative\">\n                  <SelectMenu\n                    id=\"selectDate\"\n                    menu={fetchDates.map(el => ({text: el, item: el}))}\n                    title=\"Select Date\"\n                    active={menuSelectDate}\n                  >\n                    { selectedDate ? selectedDate : \"Select delivery date\" }&nbsp;&nbsp;&nbsp;&#9662;\n                  </SelectMenu>\n                </div>\n              </Fragment>\n            ) : (\n              <div class=\"warn fg-warn br2 w-100 ba pa1 mb2 tc\">\n                <span class=\"f3 b pr1\">&#33;</span>\n                No boxes scheduled for delivery, please come back later.\n              </div>\n            )}\n\n            { selectedBox && (\n\n              <Fragment>\n\n                { modalQtyForm && (\n                  <QuantityForm includes={selectedIncludes} addons={selectedAddons} totalPrice={totalPrice} />\n                )}\n\n                <div class=\"ttu b pt2\">Box Products</div>\n                <div class=\"w-100 bb b--silver pv2 fl cf\">\n                  {selectedIncludes.map(el => \n                    <div\n                      class=\"fl f6 ph3 ma1 ba br-pill b--streamside-blue bg-streamside-blue white\"\n                    >\n                        {el.shopify_title} {(el.quantity > 1) ? `(${el.quantity}) ${getPrice(el, true)}` : \"\"}\n                    </div>\n                  )}\n                  {selectedAddons.map(el => \n                    <div\n                      class=\"fl f6 ph3 ma1 ba br-pill b--streamside-maroon bg-streamside-maroon white pointer\"\n                      name=\"selectedAddon\"\n                      data-item={el.shopify_id}\n                      data-title={el.shopify_title}\n                    >\n                    {el.shopify_title} ({el.quantity}) {getPrice(el)} &#x2718;\n                    </div>\n                  )}\n                </div>\n\n                <div class=\"cf\" />\n\n                { selectedExcludes.length ? (\n                  <div class=\"cf\">\n                    <div class=\"ttu b\">\n                      Excluded Products\n                    </div>\n                    <div class=\"fw1 f6 gray\">\n                      A suprise item will be substitued\n                    </div>\n                    <div class=\"w-100 bb b--silver pv2 fl\">\n                      {selectedExcludes.map(el =>\n                        <div\n                          class=\"fl f6 ph3 ma1 ba br-pill b--streamside-orange bg-streamside-orange white pointer\"\n                          name=\"selectedExclude\"\n                          data-item={el.shopify_id}\n                          data-title={el.shopify_title}\n                        >\n                          {el.shopify_title} &#x2718;\n                        </div>)}\n                    </div>\n                  </div>\n                ) : \"\"}\n\n                <div class=\"w-100 pv3 gray dt\">\n                  <div class=\"dtc\">\n                    <input\n                      class=\"b--silver mr2\"\n                      type=\"checkbox\"\n                      id=\"toggleEditBox\"\n                      checked={editBoxActive}\n                    />\n                    <label\n                      for=\"toggleEditBox\"\n                      htmlFor=\"toggleEditBox\"\n                    >\n                      Customize your box\n                    </label>\n                  </div>\n                  <div class=\"dtc\">\n                    <div class=\"tr\">\n                      <button\n                        class=\"f6 outline-0 gray b--gray ba ba1 bg-transparent br2 pa1 mb1 pointer\"\n                        title=\"Change product quantities\"\n                        id=\"qtyForm\"\n                        type=\"button\"\n                        >\n                        Change quantities\n                      </button>\n                    </div>\n                  </div>\n                </div>\n\n              </Fragment>\n            )}\n\n            { selectedBox && editBoxActive && (\n              <div class={`${!editBoxActiveComplete && \"absolute o-0\" } w-100`} id=\"container-box-edit\">\n                <div>\n\n                  { (selectedIncludes.length > 0) && (\n                    <SelectMenu\n                      id=\"removeItem\"\n                      menu={selectedIncludes.map(el => ({text: el.shopify_title, item: el.shopify_id}))}\n                      title=\"Remove items from your box\"\n                      active={menuRemoveItem}\n                    >\n                      Select items you'd prefer not to receive&nbsp;&nbsp;&nbsp;&#9662;\n                    </SelectMenu>\n                  )}\n\n                  { (possibleAddons.length > 0) && (\n                    <SelectMenu\n                      id=\"addItem\"\n                      menu={possibleAddons.map(el => ({text: el.shopify_title, item: el.shopify_id}))}\n                      title=\"Add items to your box\"\n                      active={menuAddItem}\n                    >\n                      Select items you'd like to add to the box&nbsp;&nbsp;&nbsp;&#9662;\n                    </SelectMenu>\n                  )}\n\n                </div>\n\n                <div class=\"ttu b pt2\">Available Products</div>\n                <div class=\"bb b--silver pv2 fl\">\n                  {possibleAddons.map(el =>\n                    <div\n                      class=\"fl f6 ph3 ma1 ba br-pill b--streamside-maroon bg-streamside-maroon white\"\n                    >\n                        {el.shopify_title} {getPrice(el)}\n                    </div>)}\n                </div>\n                <div class=\"cf\" />\n              </div>\n            )}\n\n            { selectedDate && (\n              <button\n                type=\"submit\"\n                name=\"add\"\n                id=\"add-button\"\n                aria-label=\"Add to cart\"\n                class=\"f6 ttu w-100 tracked dim outline-0 debut-yellow b--debut-brown ba ba1 bg-debut-brown br2 pa2 mb1 pointer\"\n                data-add-to-cart=\"\"\n                onclick={makeCart}\n              >\n                <span data-add-to-cart-text=\"\">{ loadedFromCart ? \"Update selection\" : \"Add to cart\" }</span>{\" \"}\n                <span class=\"dn\" data-loader=\"\">\n                  <svg\n                    aria-hidden=\"true\"\n                    focusable=\"false\"\n                    role=\"presentation\"\n                    class=\"icon icon-spinner\"\n                    viewbox=\"0 0 20 20\"\n                  >\n                    <path\n                      d=\"M7.229 1.173a9.25 9.25 0 1 0 11.655 11.412 1.25 1.25 0 1 0-2.4-.698 6.75 6.75 0 1 1-8.506-8.329 1.25 1.25 0 1 0-.75-2.385z\"\n                      fill=\"#919EAB\"\n                    ></path>\n                  </svg>\n                </span>\n              </button>\n            )}\n          </Fragment>\n        ) : <BarLoader />}\n\n      </div>\n    );\n  };\n}\n\nexport default ContainerBoxApp;\n","/** @jsx createElement */\n/**\n * Router and starting  point of the box app.\n * Renders [crank]{@link https://www.npmjs.com/@bikeshaving/crank} elements\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/initialize\n * @requires @bikeshaving/crank\n * @listens DOMContentLoaded\n */\nimport \"regenerator-runtime/runtime\"; // regeneratorRuntime error\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\nimport { renderer } from \"@bikeshaving/crank/cjs/dom\";\n\nimport Error from \"./error\";\nimport BarLoader from \"./bar-loader\";\nimport QuantityForm from \"./quantity-form\";\nimport SelectMenu from \"./select-menu\";\nimport Flash from \"./flash\";\nimport { Fetch, PostFetch } from \"./fetch\";\nimport { shallowEqual } from \"../lib\";\n\n/**\n * BoxApp crank component\n *\n * @function BoxApp\n * @param {object} props The property object\n * @param {object} props.productJson Shopify product data as extracted from\n * product page json script tag\n * @returns {Element} A crank DOM component\n */\nasync function* ContainerBoxApp({productJson}) {\n  /**\n   * If fetching data was unsuccessful.\n   *\n   * @member fetchError\n   * @type {object|string|null}\n   */\n  let fetchError = null;\n  /**\n   * Display loading indicator while fetching data\n   *\n   * @member loading\n   * @type {boolean}\n   */\n  let loading = true;\n  /**\n   * Uses fetch to collect current cart for the session \n   *\n   * @function fetchCart\n   */\n  const fetchCart = async () => {\n    const json = JSON.parse(document.querySelector(\"#cart-json\").textContent);\n    if (json.items.length === 0) {\n      //fetchCurrentDates();\n    } else {\n      //loadCart(json);\n    }\n    console.log(json);\n  };\n\n  fetchCart(); // the first thing to happem\n\n  for await ({productJson} of this) {\n    yield (\n      <div class=\"mt2 sans-serif\" id=\"container-box\">\n        { fetchError && <Error msg={fetchError} /> }\n        { !loading ? (\n          <Loading />\n        ) : (\n          <p>Here we are then</p>\n        )}\n      </div>\n    );\n  };\n}\n\nexport default ContainerBoxApp;\n","/** @jsx createElement */\n/**\n * Error display component module\n *\n * @module app/lib/error\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement, isElement } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Error component\n *\n * @returns {Element} DOM component\n * @param {object} props  Component properties\n * @param {Element|string|object} props.msg Error to be displayed\n * @example\n * { error && <ErrorMsg msg=\"Some error message\" /> }\n */\nconst ErrorMsg = ({ msg }) => {\n  // console.log(msg, typeof msg, isElement(msg));\n  if (typeof msg === \"string\" || isElement(msg)) {\n    return (\n      <div class=\"dark-red mv2 pt2 pl2 br3 ba b--dark-red bg-washed-red\">\n        <p class=\"tc\">{msg}</p>\n      </div>\n    );\n  }\n\n  if (typeof msg === \"object\" || !msg.msg) {\n    return (\n      <div class=\"dark-red mv2 pt2 pl2 br3 ba b--dark-red bg-washed-red\">\n        <p class=\"tc\">{msg.toString()}</p>\n      </div>\n    );\n  }\n\n  return (\n    <div class=\"dark-red mv2 pt2 pl2 br3 ba b--dark-red bg-washed-red\">\n      <p class=\"tc\">\n        {msg.msg}:{msg.err}\n      </p>\n    </div>\n  );\n};\n\nexport default ErrorMsg;\n\n","/**\n * Fetch components\n *\n * @module app/lib/fetch\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\n\n/**\n * Fetch component that attempts to deal reasonably if the fetch fails. Always\n * uses a `GET` request` and expects a `json` response.\n *\n * @returns {Promise} A promise resolving to { error, json }\n * @param {string} src Url to send request\n * @example\n * const src\n * Fetch(src)\n *   .then((result) => {\n *     const { error, json } = result;\n *   })\n */\nconst Fetch = async (src) => {\n  //console.log('fetching', src);\n  return fetch(src)\n    .then(async (response) => {\n      if (response.status !== 200) {\n        throw new Error(JSON.stringify(await response.json()));\n      }\n      return response.json();\n    })\n    .then((json) => {\n      //console.log(\"Got this in GET fetch:\", json);\n      return { error: null, json };\n    })\n    .catch((error) => {\n      console.warn(\"Got error in GET fetch:\", error);\n      if (Object.prototype.hasOwnProperty.call(error, \"err\")) {\n        return { error: error.err, json: null };\n      }\n      return { error, json: null };\n    });\n};\n\n/**\n * PostFetch component that attempts to deal reasonably if the fetch fails. Always\n * uses a `POST` request` and expects a `json` response.\n *\n * @returns {Promise} A promise resolving to { error, json }\n * @param {object} opts Dicitonary of options\n * @param {string} opts.src Url to send request to\n * @param {string} opts.data Data to be sent with request\n * @param {string} opts.headers Headers to send data with, usually `{\"Content-Type\": \"application/json\"}` but not when uploading files.\n * @example\n * const src = \"api/create-todo\";\n * const data = {title: \"Fix me\"};\n * const headers = { \"Content-Type\": \"application/json\" };\n * PostFetch({src, data, headers})\n *   .then((result) => {\n *     const { error, json } = result;\n *   })\n */\nconst PostFetch = async ({ src, data, headers }) => {\n  // use json if according to content-type\n  const formdata =\n    headers[\"Content-Type\"] === \"application/json\"\n      ? JSON.stringify(data)\n      : data;\n\n  const opts = {\n    method: \"POST\",\n    body: formdata,\n  };\n\n  // add headers if set in arguments - i.e. using none if sending files\n  if (headers) opts.headers = headers;\n\n  return fetch(src, opts)\n    .then(async (response) => {\n      if (response.status !== 200) {\n        throw new Error(JSON.stringify(await response.json()));\n      }\n      console.log(\"Got this response in POST fetch\", response);\n      return response.json();\n    })\n    .then((json) => {\n      console.log(\"Got this in POST fetch:\", json);\n      return { error: null, json };\n    })\n    .catch((error) => {\n      console.log(\"Got error in POST fetch:\", error);\n      if (Object.prototype.hasOwnProperty.call(error, \"err\")) {\n        return { error: error.err, json: null };\n      }\n      return { error, json: null };\n    });\n};\n\nexport { Fetch, PostFetch };\n\n","/** @jsx createElement */\n/**\n * Flash message\n *\n * @module app/flash\n * @exports {Element} Flash\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Flash\n *\n * @returns {Element} DOM component\n */\nfunction* Flash({ children }) {\n  /*\n  this.addEventListener('webkitAnimationEnd', (ev) => {\n    console.log('animation ends', ev.target);\n    ev.target.classList.add(\"o-0\");\n  });\n  */\n  for ({children} of this) {\n    yield (\n      <div \n        class=\"dn flash ba br2 z-max fixed top-2 right-2 pa3\" \n      >\n        <div class=\"tc\">\n            { children }\n        </div>\n      </div>\n    )\n  };\n};\n\nexport default Flash;\n\n/*\n<div \n  class=\"fade-out flash ba br2 z-max fixed top-2 pa3 dn\" \n>\n  <div class=\"tc\">\n      { children }\n  </div>\n</div>\n*/\n","/** @jsx createElement */\n/**\n * Cart Icon\n *\n * @module app/icon-cart\n * @exports {Element} IconCart\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\n\nconst IconCart = () => (\n<svg aria-hidden=\"true\" focusable=\"false\" role=\"presentation\" class=\"icon icon-cart\" viewBox=\"0 0 37 40\"><path d=\"M36.5 34.8L33.3 8h-5.9C26.7 3.9 23 .8 18.5.8S10.3 3.9 9.6 8H3.7L.5 34.8c-.2 1.5.4 2.4.9 3 .5.5 1.4 1.2 3.1 1.2h28c1.3 0 2.4-.4 3.1-1.3.7-.7 1-1.8.9-2.9zm-18-30c2.2 0 4.1 1.4 4.7 3.2h-9.5c.7-1.9 2.6-3.2 4.8-3.2zM4.5 35l2.8-23h2.2v3c0 1.1.9 2 2 2s2-.9 2-2v-3h10v3c0 1.1.9 2 2 2s2-.9 2-2v-3h2.2l2.8 23h-28z\"/></svg>\n);\n\nexport default IconCart;\n","/** @jsx createElement */\n/**\n * Router and starting  point of the box app.\n * Renders [crank]{@link https://www.npmjs.com/@bikeshaving/crank} elements\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/initialize\n * @requires @bikeshaving/crank\n * @listens DOMContentLoaded\n */\nimport \"regenerator-runtime/runtime\"; // regeneratorRuntime error\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\nimport { renderer } from \"@bikeshaving/crank/cjs/dom\";\n\nimport AddToCartButton from \"./add-button.js\";\nimport TextButton from \"./text-button.js\";\nimport BarLoader from \"./bar-loader.js\";\nimport ProductDescription from \"./product-description.js\";\nimport QuantityForm from \"./quantity-form.js\";\nimport SelectMenu from \"./select-menu\";\nimport Flash from \"./flash\";\nimport IconCart from \"./icon-cart\";\nimport { Fetch } from \"./fetch\";\nimport { shallowEqual } from \"../lib\";\n\nconst hasOwnProp = Object.prototype.hasOwnProperty;\n/**\n * BoxApp crank component\n *\n * @function BoxApp\n * @param {object} props The property object\n * @param {object} props.productJson Shopify product data as extracted from\n * product page json script tag\n * @returns {Element} A crank DOM component\n */\nfunction* ProductBoxApp({productJson}) {\n  /**\n   * If fetching data was unsuccessful.\n   *\n   * @member fetchError\n   * @type {object|string|null}\n   */\n  let fetchError = null;\n  /**\n   * If there is a cart and this is the container box\n   *\n   * @member cartJson\n   * @type {object|null}\n   */\n  let cartJson = null;\n  /**\n   * If there is a cart and these are the addon items\n   *\n   * @member cartAddons\n   * @type {array}\n   */\n  let cartAddons = null;\n  /**\n   * If there is a cart and this is the container box\n   *\n   * @member cartBox\n   * @type {object|null}\n   */\n  let cartBox = null;\n  /**\n   * Display loading indicator while fetching data\n   *\n   * @member loading\n   * @type {boolean}\n   */\n  let loading = true;\n  /**\n   * A message to the user - on 4s fade out\n   *\n   * @member flashMessage\n   * @type {string}\n   */\n  let flashMessage = \"\";\n  /**\n   * The total price TODO here in development udating on refresh - production\n   * may actuall use priceElement as above\n   *\n   * @member priceElement\n   * @type {Element}\n   */\n  let totalPrice = productJson.variants[0].price;\n\n  /**\n   * Uses fetch to collect current cart for the session \n   *\n   * @function fetchCart\n   */\n  const fetchCart = async () => {\n    const {error, json} = await Fetch(\"/cart.js\");\n    if (error) {\n      fetchError = error;\n      this.refresh();\n    } else {\n      if (!json.items) {\n        fetchError = \"Failed to load cart data\";\n        this.refresh();\n        return;\n      }\n      console.log(json);\n      cartJson = json;\n      cartBox = json.items.find(el => el.product_type === \"Container Box\");\n      cartAddons = json.items.filter(el => el.product_type === \"Box Produce\");\n      console.log(cartBox);\n      // Can we match this product to a cart item?\n      const match = json.items.find(el => {\n        return productJson.variants.find(variant => {\n          return variant.id === parseInt(el.variant_id);\n        });\n      });\n      if (typeof match === \"undefined\") {\n        // no we don't\n        console.log('no');\n      } else {\n        console.log('yes');\n        // use fetch to get container box data and disply image etc - can't do\n        // so here without providing api authentication but probably can when\n        // within the site itself, including credentials. So settle for the\n        // moment with providing title and whatever else we can glean from the\n        // cart data.\n        // so what to do now 1. show thus, 2. give the option to add to box?\n      }\n      loading = false;\n      this.refresh();\n    }\n  };\n\n  fetchCart();\n\n  while(true) {\n    yield (\n      <div class=\"mt2 sans-serif center measure\">\n        { fetchError && <Error msg={fetchError} /> }\n        { !loading ? (\n          <Fragment>\n            { flashMessage && (\n              <Flash>{ flashMessage }</Flash>\n            )}\n            { cartBox && (\n              <Fragment>\n                <IconCart />\n                <div>{cartBox.title} {cartBox.properties[\"Delivery Date\"]}</div>\n                <div>{cartJson.total_price}</div>\n                <div>\n                  {cartAddons.map(el => (\n                    <div>{el.title} {el.quantity} {el.properties[\"Delivery Date\"]}</div>\n                  ))}\n                </div>\n              </Fragment>\n            )}\n          </Fragment>\n        ) : (\n          <div>Here?</div>\n        )}\n      </div>\n    )\n  }\n}\n\nexport default ProductBoxApp;\n","/** @jsx createElement */\n/**\n * The product description and image, this is a temporary component while\n * developing\n *\n * @module app/product-description\n * @exports {Element} ProductDescription\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Product description component - for development only\n *\n * @returns {Element} DOM component\n */\nconst ProductDescription = ({ product, price }) => {\n  return (\n    <Fragment>\n      <h3 class=\"center\">{product.title}</h3>\n      <div class=\"w-100 vh-25 overflow-hidden\">\n      <img\n        src={`https:${product.featured_image}`}\n        title={product.title}\n        class=\"br2\"\n      />\n        </div>\n      <div class=\"pa2 dt w-100 mb1\">\n        <div class=\"dtc w-third b black\">\n          <span class=\"black price-item price-item--regular\" data-regular-price>\n            ${(price * 0.01).toFixed(2)}\n          </span>\n        </div>\n        <div class=\"dtc fw3\">\n          {product.title}\n        </div>\n        <div class=\"dtc tr\">\n          {product.id}\n        </div>\n      </div>\n    </Fragment>\n  )\n};\n\nexport default ProductDescription;\n\n\n","/** @jsx createElement */\n/**\n * Form for editing quantities\n *\n * @module app/quantity-form\n * @exports {Element} QuantityForm\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Component to update quantities in box\n *\n * @returns {Element} DOM component\n */\nconst QuantityForm = ({ includes, addons }) => {\n  const toPrice = (num) => `$${(num * 0.01).toFixed(2)}`;\n  const getPrice = (el, includes) => toPrice(el.shopify_price * (includes ? el.quantity - 1 : el.quantity));\n\n  const titleStyle = \"pa2 ba outline-0 w-70 input-reset br2 bt bb bl br-0 br--left\";\n  const quantityStyle = \"pa2 ba w-10 input-reset br2 ba br--left br--right\";\n  const priceStyle = \"pa2 ba outline-0 w-20 input-reset br2 bt bb br bl-0 br--right\";\n\n  const TitleInput = ({ el }) => (\n    <input\n      class={titleStyle}\n      type=\"text\"\n      readonly\n      name=\"title\"\n      value={`${el.shopify_title} (${toPrice(el.shopify_price)})`}\n    />\n  );\n\n  const QuantityInput = ({ el, id }) => (\n    <input\n      class={quantityStyle}\n      type=\"number\"\n      steps=\"1\"\n      min=\"0\"\n      name=\"quantity\"\n      data-id={id}\n      id={el.shopify_id}\n      value={el.quantity}\n      autocomplete=\"off\"\n    />\n  );\n\n  const PriceInput = ({ el, includes }) => (\n    <input\n      class={priceStyle}\n      type=\"text\"\n      readonly\n      name=\"title\"\n      value={getPrice(el, includes)}\n    />\n  );\n\n  return (\n    <div class=\"relative\">\n      <div class=\"absolute w-100 ba bg-near-white z-9999\">\n        <button\n          class=\"bn outline-0 bg-transparent pa0 no-underline mid-gray dim o-70 absolute top-0 right-1\"\n          name=\"close\"\n          type=\"button\"\n          id=\"qtyFormClose\"\n          title=\"Close modal\"\n        >\n          &#x2716;\n          <span class=\"dn\">Close modal</span>\n        </button>\n        <div class=\"pa2 bg-white\">\n          <p class=\"fw2 ttu tracked mt2 mb1 f7 tc\">Included:</p>\n          {includes.map(el => \n            <div class=\"mv1 center\">\n              <TitleInput el={el} />\n              <QuantityInput el={el} id=\"includes\" />\n              <PriceInput el={el} includes={true} />\n            </div>\n          )}\n          {(addons.length > 0) && (\n            <Fragment>\n              <p class=\"fw2 ttu tracked mt2 mb1 f7 tc\">Extras:</p>\n              {addons.map(el => \n                <div class=\"mv1 center\">\n                  <TitleInput el={el} />\n                  <QuantityInput el={el} id=\"addons\" />\n                  <PriceInput el={el} includes={false} />\n                </div>\n              )}\n            </Fragment>\n          )}\n          <div class=\"tr\">\n            <button\n              class=\"f6 pv1 ph2 ma1 outline-0 bg-light-gray dark-gray b--gray ba br2 pointer\"\n              name=\"close\"\n              type=\"button\"\n              id=\"qtyFormClose\"\n              title=\"Close modal\"\n              >\n                Close\n              </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  )\n};\n\nexport default QuantityForm;\n\n\n","/** @jsx createElement */\n/**\n * Component\n *\n * @module app/product-description\n * @exports {Element} SelectDeliveryDate\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement, Fragment } from \"@bikeshaving/crank/cjs\";\nimport TextButton from \"./text-button.js\";\n\n/**\n * Component\n *\n * @returns {Element} DOM component\n * <SelectMenu id=\"selectDate\" menu={fetchDates} title=\"Select Date\" active={menuSelectDate} />\n */\nconst SelectMenu = ({ id, active, title, menu, children }) => {\n  const type = (id.startsWith(\"selectDate\")) ? \"ttu tracked\" : \"\";\n  return (\n    <Fragment>\n      <button\n        class={`dib w-100 f6 ${type} outline-0 gray b--gray ba ba1 bg-transparent br2 pa2 mb1 pointer`}\n        title={title}\n        id={id}\n        type=\"button\"\n        >\n        { children }\n      </button>\n      { active && (\n        <div class=\"absolute w-100 bg-white br2\">\n        {menu.map((el, idx, arr) => (\n          <TextButton text={el.text} index={idx} array={arr} name={id} item={el.item} />\n        ))}\n        </div>\n      )}\n    </Fragment>\n  )\n};\n\nexport default SelectMenu;\n","/** @jsx createElement */\n/**\n *\n * @module app/form/filter-select\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Renders a select field for generating filters\n *\n * @generator\n * @param {object} props The property object\n * @param {string} props.text The display text - will be slugified to create name/id\n * @param {number} props.index The index of the menu array - used to add borders and border radius to group multiple items\n * @param {array} props.array The menu array that this is a part of\n * @param {string} props.title Text used for visual hint on hover\n * @param {string} props.name Used to identify the action when listening for click on the component\n * @param {string|number} props.item Added to `data-item` attribute and is the object collected and used in final action\n * @yields {Element} A select field\n */\nfunction TextButton({ text, index, array, title, name, item }) {\n  /**\n   * Style selection according to props.position to add rounded corners as\n   * necessary to render grouped elements\n   *\n   * @member {string}\n   */\n  let position;\n  switch(index) {\n    case 0:\n      position = \"top\";\n      break;\n    case (array.length - 1):\n      position = \"bottom\";\n      break;\n    default:\n      position = \"center\";\n  }\n  if (array.length === 1) position = \"single\";\n  let borders = \"ba\";\n  if (position === \"top\") borders = \"br bl bt bb-0 br2 br--top\";\n  if (position === \"center\") borders = \"bl br bb-0 bt-0 br--top br2 br--top br--bottom\";\n  if (position === \"bottom\") borders = \"br bl bb bt-0 br2 br--bottom\";\n  if (position === \"single\") borders = \"ba br2\";\n\n  const slug = text.replace(/ /g, '-');\n  const type = (name === \"selectDate\") ? \"ttu tracked\" : \"\";\n\n  return (\n    <button\n      class={`w-100 f6 ${type} outline-0 dark-gray b--gray ${borders} bg-transparent pointer pa0`}\n      title={text}\n      name={slug}\n      id={slug}\n      type=\"button\"\n      >\n        <div\n          name={name}\n          class=\"dim bg-animate hover-bg-near-white pa1\"\n          data-item={item}\n          data-title={text}\n        >\n          { text }\n        </div>\n      </button>\n  );\n}\n\nexport default TextButton;\n\n","/**\n * Handle page transitions for site\n *\n * @author Darryl Cousins <darryljcousins@gmail.com>\n * @module app/standalone/transitions\n * @listens DOMContentLoaded\n */\nimport \"regenerator-runtime/runtime\"; // regeneratorRuntime error\nimport Swup from \"swup\";\nimport collection from \"./collection\";\nimport boxApp from \"./box-app\";\n\nconst init = () => {\n\n  const page_type = document.querySelector(\"#swup\").getAttribute(\"data-page-type\");\n\n  switch (page_type) {\n    case \"index\":\n      collection.init();\n      break;\n    case \"collection\":\n      collection.init();\n      break;\n    case \"product\":\n      boxApp.init();\n      break;\n    case \"page\":\n      break;\n  };\n\n};\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  // do your setup here\n  //const main = document.querySelectorAll(\"#swup\");\n  //console.log('page loaded in transitions, HERE');\n  const swup = new Swup();\n  window.swup = swup;\n  init();\n  swup.on('contentReplaced', init);\n  //swup.on('willReplaceContent', () => window.observer.disconnect());\n});\n\n","/**\n * Some library methods\n *\n * @module app/lib\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\n\n/**\n * Shallow compare two objects - adequate from 'flat' objects of key/value pairs\n *\n * @returns {boolean} Returns true if shallow comparison passes\n * @param {object} object1 Object to compare\n * @param {object} object2 Other object to compare\n * @example\n * const o1 = {me: 'dc', you: 'mh'};\n * const o2 = {me: 'dc', you: 'mh'};\n * shallowEqual(o1, o2) // true\n */\nfunction shallowEqual(object1, object2) {\n  const keys1 = Object.keys(object1);\n  const keys2 = Object.keys(object2);\n\n  if (keys1.length !== keys2.length) {\n    return false;\n  }\n\n  for (let key of keys1) {\n    if (object1[key] !== object2[key]) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\nexport {\n  shallowEqual\n};\n","/** @jsx createElement */\n/**\n * Component\n *\n * @module app/product-description\n * @exports {Element} Template\n * @author Darryl Cousins <darryljcousins@gmail.com>\n */\nimport { createElement } from \"@bikeshaving/crank/cjs\";\n\n/**\n * Component\n *\n * @returns {Element} DOM component\n */\nconst Template = () => {\n  return <div>Template</div>;\n};\n\nexport default Template;\n\n\n\n"]}